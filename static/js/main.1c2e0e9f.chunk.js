(this.webpackJsonpevents=this.webpackJsonpevents||[]).push([[0],{726:function(e,t,n){},759:function(e,t,n){"use strict";n.r(t);var r=n(26),a=n(2),c=n(0),s=n.n(c),o=n(63),i=n.n(o),l=n(25),u=n(426),j=n(50),d=n(262);n(628),n(629);d.a.initializeApp({apiKey:"AIzaSyAT_a-8zLqaooqBhikXEH1MJ6m8r-39ZQM",authDomain:"revent-72a9c.firebaseapp.com",projectId:"revent-72a9c",storageBucket:"revent-72a9c.appspot.com",messagingSenderId:"752217483559",appId:"1:752217483559:web:063f3db3a1e25174f56102",measurementId:"G-NJ3TE4MHED"}),d.a.firestore().settings({timestampInSnapshots:!0});var b=d.a,p=n(428),h=(n(630),n(20)),O=n(21),x=n(23),f=n(22),m=n(37),v=n(779),g=n(775),y=n(28),w=n(438),k=n(195),C=n(17),A=n(15),M=n.n(A),P=n(29),F=n(186),E=n(72),L=Object(l.compose)(Object(C.connect)((function(e){return{user:e.firebase.auth}}),{signOut:function(){return function(){var e=Object(P.a)(M.a.mark((function e(t,n,r){var a,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.getFirebase,r.getFirestore,c=a(),e.prev=2,e.next=5,c.auth().signOut();case 5:t({type:"CLOSE_MODAL"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()}}),m.f)((function(e){var t=e.signOut,n=e.user,r=e.history;return Object(a.jsxs)(v.a.Item,{position:"right",children:[Object(a.jsx)(w.a,{avatar:!0,spaced:"right",src:n.photoURL||"assets/user.png"}),Object(a.jsx)(k.a,{pointing:"top left",text:n.displayName||"user",children:Object(a.jsxs)(k.a.Menu,{children:[Object(a.jsx)(k.a.Item,{as:y.b,to:"/createEvent",text:"Create Event",icon:"plus"}),Object(a.jsx)(k.a.Item,{as:y.b,text:"My Events",icon:"calendar"}),Object(a.jsx)(k.a.Item,{as:y.b,text:"My Network",icon:"users"}),Object(a.jsx)(k.a.Item,{as:y.b,text:"My profile",icon:"user"}),Object(a.jsx)(k.a.Item,{as:y.b,to:"/settings/basic",text:"My account",icon:"settings"}),Object(a.jsx)(k.a.Item,{text:"Sign out",icon:"power",onClick:function(){t(),r.push("/")}})]})})]})})),I=n(786),R=function(e){return console.log(e),{type:"OPEN_MODAL",payload:e}},S=function(){return{type:"CLOSE_MODAL"}};var D=Object(C.connect)(null,{openModal:R})((function(e){return Object(a.jsxs)(v.a.Item,{position:"right",children:[Object(a.jsx)(I.a,{content:"Login",onClick:function(){return e.openModal("LoginModal")}}),Object(a.jsx)(I.a,{content:"Register",style:{marginLeft:"0.5em"},onClick:function(){return e.openModal("RegisterModal")}})]})})),U=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return Object(a.jsx)(v.a,{inverted:!0,children:Object(a.jsxs)(g.a,{children:[Object(a.jsxs)(v.a.Item,{header:!0,as:y.c,exact:!0,to:"/",children:[Object(a.jsx)("img",{src:"assets/logo.png",alt:"logo"}),"Re-vents"]}),Object(a.jsx)(v.a.Item,{as:y.c,to:"/Dashboard",name:"Events"}),this.props.user.uid?Object(a.jsx)(L,{user:this.props.user}):Object(a.jsx)(D,{})]})})}}]),n}(s.a.Component),T=Object(C.connect)((function(e){return{user:e.firebase.auth}}))(U),N=(s.a.Component,n(787)),z=n(251),_=n(782),G=n(104),H=n(783),V=n(761),B=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.attendee;return Object(a.jsx)(H.a.Item,{children:Object(a.jsx)(w.a,{as:y.b,to:"/profile/".concat(e.id),size:"mini",circular:!0,src:e.photoURL})})}}]),n}(s.a.Component),J=function(e){if(e)return Object.entries(e).map((function(e){return Object.assign({},e[1],{id:e[0]})}))};var Y=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.event;return Object(a.jsxs)(N.a.Group,{children:[Object(a.jsxs)(N.a,{children:[e.isCancelled&&Object(a.jsx)(z.a,{as:"a",color:"red",ribbon:"right",children:"cancelled"}),Object(a.jsx)(_.a.Group,{children:Object(a.jsxs)(_.a,{children:[Object(a.jsx)(_.a.Image,{size:"tiny",circular:!0,src:e.hostPhotoURL}),Object(a.jsxs)(_.a.Content,{children:[Object(a.jsx)(_.a.Header,{as:y.b,to:"/events/".concat(e.id),content:e.title}),Object(a.jsxs)(_.a.Description,{children:["Hosted by ",Object(a.jsx)(y.b,{to:"profile/".concat(e.hostedUid),children:e.hostedBy})]})]})]})})]}),Object(a.jsx)(N.a,{children:Object(a.jsxs)("span",{children:[Object(a.jsx)(G.a,{name:"clock"}),Object(V.default)(e.date.toDate(),"EEEE do LLLL")," at "," ",Object(V.default)(e.date.toDate(),"h:mm a"),Object(a.jsx)(G.a,{name:"marker"})," ",e.address]})}),Object(a.jsx)(N.a,{secondary:!0,children:Object(a.jsx)(H.a,{horizontal:!0,children:e.attendees&&J(e.attendees).map((function(e){return Object(a.jsx)(B,{attendee:e},e.id)}))})}),Object(a.jsxs)(N.a,{clearing:!0,children:[Object(a.jsx)("div",{children:e.description}),Object(a.jsx)(I.a,{color:"teal",floated:"right",content:"View",as:y.b,to:"/events/".concat(e.id)})]})]})}}]),n}(s.a.Component),q=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).renderEvents=function(){if(e.props.events)return e.props.events.map((function(e){return Object(a.jsx)(Y,{event:e},e.id)}))},e}return Object(O.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:this.renderEvents()})}}]),n}(s.a.Component),W=n(789),K=(n(218),n(419)),Q=n(420),X=n(780),Z=n(788),$=n(159),ee=n(40),te=n.n(ee),ne=function(e){var t=e.input,n=e.type,c=e.placeholder,s=e.meta,o=s.error,i=s.touched;return Object(a.jsxs)(X.a.Field,{error:i&&!!o,children:[i&&o?Object(a.jsx)(z.a,{basic:!0,color:"red",children:o}):null,Object(a.jsx)("input",Object(r.a)(Object(r.a)({},t),{},{placeholder:c,type:n}))]})},re=n(777),ae=function(e){var t=e.input,n=(e.type,e.placeholder),c=e.rows,s=e.meta,o=s.error,i=s.touched;return Object(a.jsx)(X.a.Field,{error:i&&!!o,children:Object(a.jsx)(re.a,Object(r.a)(Object(r.a)({},t),{},{placeholder:n,rows:c}))})},ce=n(255),se=n(430),oe=n.n(se),ie=(n(645),function(e){var t=e.input,n=e.placeholder,c=e.meta,s=c.touched,o=c.error,i=e.dateFormat,l=Object(ce.a)(e,["input","placeholder","meta","dateFormat"]);return Object(a.jsxs)(X.a.Field,{error:s&&!!o,children:[Object(a.jsx)(oe.a,Object(r.a)(Object(r.a)({},l),{},{placeholderText:n,selected:t.value?"[object Date]"!==Object.prototype.toString.call(t.value)?t.value.toDate():t.value:null,onChange:t.onChange,dateFormat:i,showTimeSelect:!0,timeFormat:"HH:mm",onChangeRaw:function(e){return e.preventDefault()}})),s&&o?Object(a.jsx)(z.a,{basic:!0,color:"red",children:o}):null]})}),le=n(776),ue=function(e){var t=e.input,n=(e.type,e.placeholder),r=e.options,c=e.multiple,s=e.meta,o=s.error,i=s.touched;return Object(a.jsx)(X.a.Field,{error:i&&!!o,children:Object(a.jsx)(le.a,{placeholder:n,value:t.value||null,onChange:function(e,n){return t.onChange(n.value)},options:r,multiple:c})})},je=n(85),de=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],be=Object(je.combineValidators)({title:Object(je.isRequired)({message:"the event title is required"}),date:Object(je.isRequired)({message:"the date is required"})}),pe=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onFormSubmit=function(){var t=Object(P.a)(M.a.mark((function t(n){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Object.keys(e.props.initialValues).length>0)){t.next=5;break}e.props.updateEvent(e.props.initialValues,n),e.props.history.push("/events/".concat(e.props.initialValues.id)),t.next=10;break;case 5:return t.next=7,e.props.createEvent(n);case 7:t.sent,e.props.history.push("/dashboard"),ee.toastr.success("Success","You added New Event");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,this.props.firestore.setListener("events/".concat(t));case 3:e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,this.props.firestore.unsetListener("events/".concat(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(a.jsx)(N.a,{clearing:!0,children:Object(a.jsxs)(X.a,{className:"ui form",onSubmit:this.props.handleSubmit(this.onFormSubmit),children:[Object(a.jsx)(Z.a,{sub:!0,color:"teal",content:"Event Details"}),Object(a.jsx)(K.a,{name:"title",component:ne,placeholder:"Event Title"}),Object(a.jsx)(K.a,{name:"description",component:ae,placeholder:"describe ur event",rows:5}),Object(a.jsx)(K.a,{name:"address",component:ne,placeholder:"your location"}),Object(a.jsx)(K.a,{name:"category",component:ue,placeholder:"choose the category",options:de,multiple:!1}),Object(a.jsx)(K.a,{name:"date",component:ie,dateFormat:"MMMM d, yyyy h:mm aa",placeholder:"event date"}),Object(a.jsx)(I.a,{type:"submit",floated:"right",positive:!0,content:"Submit"}),Object(a.jsx)(I.a,{floated:"right",content:"Cancel",onClick:this.props.initialValues?function(){return e.props.history.push("/events/".concat(e.props.initialValues.id))}:function(){e.props.history.push("/dashboard")}}),Object.keys(this.props.initialValues).length>0&&Object(a.jsx)(I.a,{floated:"left",content:this.props.event.isCancelled?"Reactive the event":"Cancel the event",color:this.props.event.isCancelled?"green":"red",onClick:function(t){t.preventDefault(),e.props.cancelOrActiveEvent(e.props.event)}})]})})}}]),n}(s.a.Component),he=Object(j.withFirestore)(Object(C.connect)((function(e,t){var n=t.match.params.id,r={};return e.firestore.ordered.events&&e.firestore.ordered.events.length>0&&(r=e.firestore.ordered.events.filter((function(e){return e.id===n}))[0]||{}),{initialValues:r,event:r}}),{createEvent:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,a,c){var s,o,i,l,u,j,d;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.getFirebase,o=c.getFirestore,i=s(),l=o(),u=i.auth().currentUser,j=Object(r.a)(Object(r.a)({},e),{},{hostedBy:u.displayName,hostedUid:u.uid,hostPhotoURL:u.photoURL,created:new Date,attendees:Object($.a)({},u.uid,{going:!0,joinDAte:new Date,photoURL:u.photoURL,displayName:u.displayName,host:!0})}),t.prev=5,t.next=8,l.add("events",j);case 8:return d=t.sent,t.next=11,l.set("event_attendee/".concat(d.id,"_").concat(u.uid),{eventId:d.id,userId:u.uid,eventDate:e.date,host:!0});case 11:return t.abrupt("return",d);case 14:t.prev=14,t.t0=t.catch(5),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,n,r){return t.apply(this,arguments)}}()},updateEvent:function(e,t){return function(){var n=Object(P.a)(M.a.mark((function n(a,c,s){var o,i,l;return M.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=s.getFirebase,i=s.getFirestore,o(),l=i(),n.prev=3,n.next=6,l.update("events/".concat(e.id),Object(r.a)({},t));case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[3,8]])})));return function(e,t,r){return n.apply(this,arguments)}}()},cancelOrActiveEvent:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,r,a){var c,s,o,i,l;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=a.getFirebase,s=a.getFirestore,c(),o=s(),i=e.isCancelled?"Are you sure you want to reactive the event":"Are you sure you want to cancel the evnet",l=!e.isCancelled;try{ee.toastr.confirm(i,{onOk:function(){var t=Object(P.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.update("events/".concat(e.id),{isCancelled:l});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}catch(n){console.log(n)}case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}})(Object(Q.a)({form:"eventForm",enableReinitialize:!0,validate:be})(pe))),Oe=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.events;return Object(a.jsxs)(W.a,{children:[Object(a.jsx)(W.a.Column,{width:10,children:Object(a.jsx)(q,{events:e})}),Object(a.jsx)(W.a.Column,{width:6})]})}}]),n}(s.a.Component),xe=Object(l.compose)(Object(j.firestoreConnect)((function(){return["events"]})),Object(C.connect)((function(e){return{events:e.firestore.ordered.events}})))(Oe),fe=n(778),me=function(e){var t=e.input,n=e.label,c=e.type;return Object(a.jsx)(X.a.Field,{children:Object(a.jsxs)("div",{className:"ui radio",children:[Object(a.jsx)("input",Object(r.a)(Object(r.a)({},t),{},{type:c}))," ",Object(a.jsx)("label",{children:n})]})})},ve="ASYNC_ACTION_START",ge="ASYNC_ACTION_FINISH",ye="ASYNC_ACTION_ERROR",we="APP_LOADED";var ke={loading:!1,error:null,initialized:!1};var Ce=function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,r,a){var c,s,o;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.getFirebase,a.getFirestore,s=c(),e.isEmpty,e.isLoaaded,o=Object(ce.a)(e,["isEmpty","isLoaaded"]),t.prev=3,t.next=6,s.updateProfile(o);case 6:ee.toastr.success("Success","Your profile has been updated"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n,r){return t.apply(this,arguments)}}()};var Ae=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.pristine,n=e.submitting,r=e.handleSubmit,c=e.updateProfile;return Object(a.jsxs)(N.a,{children:[Object(a.jsx)(Z.a,{dividing:!0,size:"large",content:"Basics"}),Object(a.jsxs)(X.a,{onSubmit:r(c),children:[Object(a.jsx)(K.a,{width:8,name:"displayName",type:"text",component:ne,placeholder:"Known As"}),Object(a.jsxs)(X.a.Group,{inline:!0,children:[Object(a.jsx)("label",{children:"Gender"}),Object(a.jsx)(K.a,{name:"gender",type:"radio",component:me,value:"male",label:"male"}),Object(a.jsx)(K.a,{name:"gender",type:"radio",component:me,value:"female",label:"female"})]}),Object(a.jsx)(K.a,{width:8,name:"dateOfBirth",component:ie,dateFormat:"MMMM d, yyyy h:mm aa",placeholder:"Date of Birth"}),Object(a.jsx)(K.a,{name:"city",placeholder:"Home Town",options:{types:["(cities)"]},label:"Female",component:ne,width:8}),Object(a.jsx)(fe.a,{}),Object(a.jsx)(I.a,{disabled:t||n,size:"large",positive:!0,content:"Update Profile"})]})]})}}]),n}(c.Component),Me=Object(l.compose)(Object(C.connect)(null,{updateProfile:Ce}),Object(Q.a)({form:"userProfile",enableReinitialize:!0,destroyOnUnmount:!1}))(Ae),Pe=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],Fe=Object(Q.a)({form:"userProfile",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){e.pristine,e.submitting;var t=e.handleSubmit,n=e.updateProfile;return Object(a.jsxs)(N.a,{children:[Object(a.jsx)(Z.a,{dividing:!0,size:"large",content:"About Me"}),Object(a.jsx)("p",{children:"Complete your profile to get the most out of this site"}),Object(a.jsxs)(X.a,{onSubmit:t(n),children:[Object(a.jsxs)(X.a.Group,{inline:!0,children:[Object(a.jsx)("label",{children:"Tell us your status: "}),Object(a.jsx)(K.a,{name:"status",component:me,type:"radio",value:"single",label:"Single"}),Object(a.jsx)(K.a,{name:"status",component:me,type:"radio",value:"relationship",label:"Relationship"}),Object(a.jsx)(K.a,{name:"status",component:me,type:"radio",value:"married",label:"Married"})]}),Object(a.jsx)(fe.a,{}),Object(a.jsx)("label",{children:"Tell us about yourself"}),Object(a.jsx)(K.a,{name:"about",component:ae,placeholder:"About Me"}),Object(a.jsx)(K.a,{name:"interests",component:ue,options:Pe,value:"interests",multiple:!0,placeholder:"Select your interests"}),Object(a.jsx)(K.a,{width:8,name:"occupation",type:"text",component:ne,placeholder:"Occupation"}),Object(a.jsx)(K.a,{width:8,name:"origin",options:{types:["(regions)"]},component:ne,placeholder:"Country of Origin"}),Object(a.jsx)(fe.a,{}),Object(a.jsx)(I.a,{size:"large",positive:!0,content:"Update Profile"})]})]})})),Ee=n(263),Le=n(433);n(725);function Ie(e){var t=e.setImage,n=e.imagePreview,r=Object(c.useRef)(null);return Object(a.jsx)(Le.a,{ref:r,src:n,style:{height:200,width:"100%"},initialAspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){var e=null===r||void 0===r?void 0:r.current;(null===e||void 0===e?void 0:e.cropper).getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpeg")}})}var Re=n(437);function Se(e){var t=e.setFiles,n={border:"dashed 3px #eee",borderRadius:"5%",paddingTop:"30px",textAlign:"center"},s=Object(c.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[t]),o=Object(Re.a)({onDrop:s}),i=o.getRootProps,l=o.getInputProps,u=o.isDragActive;return Object(a.jsxs)("div",Object(r.a)(Object(r.a)({},i()),{},{style:u?Object(r.a)(Object(r.a)({},n),{border:"dashed 3px green"}):n,children:[Object(a.jsx)("input",Object(r.a)({},l())),Object(a.jsx)(G.a,{name:"upload",size:"huge"}),Object(a.jsx)(Z.a,{content:"Drop image here"})]}))}var De=n(785),Ue=Object(C.connect)(null)((function(e){var t=e.photos,n=e.profile,r=e.handleDeletingPhoto,s=e.handleSettingMainPhoto;return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(Z.a,{sub:!0,color:"teal",content:"All Photos"}),Object(a.jsxs)(De.a.Group,{itemsPerRow:5,children:[Object(a.jsxs)(De.a,{children:[Object(a.jsx)(w.a,{src:n.photoURL||"assets/user.png"}),Object(a.jsx)(I.a,{positive:!0,children:"Main Photo"})]}),t&&t.map((function(e){return Object(a.jsxs)(De.a,{children:[Object(a.jsx)(w.a,{src:e.url}),Object(a.jsxs)("div",{className:"ui two buttons",children:[Object(a.jsx)(I.a,{basic:!0,color:"green",onClick:function(){return s(e)},children:"Main"}),Object(a.jsx)(I.a,{basic:!0,icon:"trash",color:"red",onClick:function(){return r(e)}})]})]},e.id)}))]})]})})),Te=Object(l.compose)(Object(C.connect)((function(e){return{auth:e.firebase.auth,photos:e.firestore.ordered.photos,profile:e.firebase.profile}}),{uploadProfileImage:function(e,t){return function(){var n=Object(P.a)(M.a.mark((function n(r,a,c){var s,o,i,l,u,j,d,b,p;return M.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=c.getFirebase,o=c.getFirestore,i=s(),l=o(),u=i.auth().currentUser,j="".concat(u.uid,"/user_images"),d={name:t},n.prev=6,r({type:ve}),n.next=10,i.uploadFile(j,e,null,d);case 10:return b=n.sent,n.next=13,b.uploadTaskSnapshot.ref.getDownloadURL();case 13:return p=n.sent,n.next=16,l.get("users/".concat(u.uid));case 16:if(n.sent.data().photoURL){n.next=22;break}return n.next=20,i.updateProfile({photoURL:p});case 20:return n.next=22,u.updateProfile({photoURL:p});case 22:return n.next=24,l.add({collection:"users",doc:u.uid,subcollections:[{collection:"photos"}]},{name:t,url:p});case 24:r({type:ge}),n.next=30;break;case 27:n.prev=27,n.t0=n.catch(6),console.log(n.t0);case 30:case"end":return n.stop()}}),n,null,[[6,27]])})));return function(e,t,r){return n.apply(this,arguments)}}()},deletePhoto:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,r,a){var c,s,o,i,l;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.getFirebase,s=a.getFirestore,o=c(),i=s(),l=o.auth().currentUser,t.prev=4,t.next=7,o.deleteFile("".concat(l.uid,"/user_images/").concat(e.name));case 7:return t.next=9,i.delete({collection:"users",doc:l.uid,subcollections:[{collection:"photos",doc:e.id}]});case 9:t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(4),new Error("Something went wrong");case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n,r){return t.apply(this,arguments)}}()},setMainPhoto:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,r,a){var c,s,o;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.getFirebase,s=c(),o=s.auth().currentUser,t.prev=3,t.next=6,s.updateProfile({photoURL:e.url});case 6:return t.next=8,o.updateProfile({photoURL:e.url});case 8:t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(3),new Error("Something went wrong");case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n,r){return t.apply(this,arguments)}}()}}),Object(j.firestoreConnect)((function(e){return[{collection:"users",doc:e.auth.uid,subcollections:[{collection:"photos"}],storeAs:"photos"}]})))((function(e){var t=e.photos,n=e.profile,r=e.uploadProfileImage,s=e.deletePhoto,o=e.setMainPhoto,i=Object(c.useState)([]),l=Object(Ee.a)(i,2),u=l[0],j=l[1],d=Object(c.useState)(null),b=Object(Ee.a)(d,2),p=b[0],h=b[1],O=Object(c.useState)(!1),x=Object(Ee.a)(O,2),f=(x[0],x[1],function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(p,u[0].name);case 3:g(),ee.toastr.success("Success","The photo has been uploaded"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),ee.toastr.error("Oops","Something went wrong");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()),m=function(){var e=Object(P.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:ee.toastr.success("Success","The photo has been removed"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),ee.toastr.error("Oops",e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(P.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),ee.toastr.error(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){j([]),h(null)};return Object(c.useEffect)((function(){return function(){u.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[u]),Object(a.jsxs)(N.a,{children:[Object(a.jsx)(Z.a,{dividing:!0,size:"large",content:"Your Photos"}),Object(a.jsxs)(W.a,{children:[Object(a.jsx)(W.a.Row,{}),Object(a.jsxs)(W.a.Column,{width:4,children:[Object(a.jsx)(Z.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),Object(a.jsx)(Se,{setFiles:j})]}),Object(a.jsx)(W.a.Column,{width:1}),Object(a.jsxs)(W.a.Column,{width:4,children:[Object(a.jsx)(Z.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),u.length>0&&Object(a.jsx)(Ie,{setImage:h,imagePreview:u[0].preview})]}),Object(a.jsx)(W.a.Column,{width:1}),Object(a.jsxs)(W.a.Column,{width:4,children:[Object(a.jsx)(Z.a,{sub:!0,color:"teal",content:"Step 3 - Preview and Upload"}),u.length>0&&Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)("div",{className:"img-preview",style:{minWidth:"200px",minHeight:"200px",overflow:"hidden"}}),Object(a.jsxs)(I.a.Group,{children:[Object(a.jsx)(I.a,{onClick:f,style:{width:"100px"},positive:!0,icon:"check"}),Object(a.jsx)(I.a,{onClick:g,style:{width:"100px"},icon:"close"})]})]})]})]}),Object(a.jsx)(fe.a,{}),Object(a.jsx)(Ue,{photos:t,profile:n,handleDeletingPhoto:m,handleSettingMainPhoto:v})]})})),Ne=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).renderJoinManageButton=function(){var t=e.props,n=t.event,r=t.userId;if(n.hostedUid===r)return Object(a.jsx)(N.a,{attached:"bottom",clearing:!0,children:Object(a.jsx)(I.a,{as:y.b,to:"/manageEvent/".concat(n.id),color:"orange",floated:"right",children:"Manage Event"})});var c=J(n.attendees),s=c&&c.some((function(e){return e.id===r}));return Object(a.jsxs)(N.a,{attached:"bottom",children:[s&&!n.isCancelled&&Object(a.jsx)(I.a,{onClick:function(){return e.props.cancelMyPlace(n)},children:"Cancel My Place"}),!s&&!n.isCancelled&&Object(a.jsx)(I.a,{color:"teal",onClick:function(){return e.props.addAttendee(n)},children:"JOIN THIS EVENT"}),n.isCancelled&&Object(a.jsx)(z.a,{size:"large",color:"red",children:"The Event Was Cancelled"})]})},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.event;e.userId;return Object(a.jsxs)(N.a.Group,{children:[Object(a.jsxs)(N.a,{basic:!0,attached:"top",style:{padding:"0"},children:[Object(a.jsx)(w.a,{src:"/assets/categoryImages/drinks.jpg",fluid:!0,style:{filter:"brightness(30%)"}}),Object(a.jsx)(N.a,{basic:!0,style:{position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},children:Object(a.jsx)(_.a.Group,{children:Object(a.jsx)(_.a,{children:Object(a.jsxs)(_.a.Content,{children:[Object(a.jsx)(Z.a,{size:"huge",content:t.title,style:{color:"white"}}),Object(a.jsx)("p",{children:Object(V.default)(t.date.toDate(),"EEEE do LLLL")}),Object(a.jsxs)("p",{children:["Hosted by ",Object(a.jsx)("strong",{children:t.hostedBy})]})]})})})})]}),this.renderJoinManageButton()]})}}]),n}(s.a.Component),ze=Object(C.connect)((function(e){return{userId:e.firebase.auth.uid}}),{addAttendee:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,r,a){var c,s,o,i,l,u;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.getFirebase,s=a.getFirestore,o=s(),i=c(),l=i.auth().currentUser,u={displayName:r().firebase.profile.displayName,going:!0,host:!1,photoURL:r().firebase.profile.photoURL||"assets/user.png",joinDAte:o.FieldValue.serverTimestamp()},t.prev=5,t.next=8,o.update("events/".concat(e.id),Object($.a)({},"attendees.".concat(l.uid),u));case 8:return t.next=10,o.set("event_attendee/".concat(e.id,"_").concat(l.uid),{eventId:e.id,userId:l.uid,eventDate:e.date,host:!1});case 10:ee.toastr.success("Success","You have joined the event"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0),ee.toastr.error("Oops","Problem signing up to the event");case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()},cancelMyPlace:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,r,a){var c,s,o,i,l;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.getFirebase,s=a.getFirestore,o=c(),i=s(),l=o.auth().currentUser,t.prev=4,t.next=7,i.update("events/".concat(e.id),Object($.a)({},"attendees.".concat(l.uid),i.FieldValue.delete()));case 7:return t.next=9,i.delete("event_attendee/".concat(e.id,"_").concat(l.uid));case 9:ee.toastr.success("Success","You have cancelled your Place"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.log(t.t0),ee.toastr.error("Oops","Something went wrong");case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n,r){return t.apply(this,arguments)}}()}})(Ne),_e=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.event;return Object(a.jsxs)(N.a.Group,{children:[Object(a.jsx)(N.a,{attached:"top",children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(W.a.Column,{width:1,children:Object(a.jsx)(G.a,{size:"large",color:"teal",name:"info"})}),Object(a.jsx)(W.a.Column,{width:15,children:Object(a.jsx)("p",{children:e.description})})]})}),Object(a.jsx)(N.a,{attached:!0,children:Object(a.jsxs)(W.a,{verticalAlign:"middle",children:[Object(a.jsx)(W.a.Column,{width:1,children:Object(a.jsx)(G.a,{name:"calendar",size:"large",color:"teal"})}),Object(a.jsx)(W.a.Column,{width:15,children:Object(a.jsx)("span",{children:Object(V.default)(e.date.toDate(),"EEEE do LLLL")})})]})}),Object(a.jsx)(N.a,{attached:!0,children:Object(a.jsxs)(W.a,{verticalAlign:"middle",children:[Object(a.jsx)(W.a.Column,{width:1,children:Object(a.jsx)(G.a,{name:"marker",size:"large",color:"teal"})}),Object(a.jsx)(W.a.Column,{width:11,children:Object(a.jsx)("span",{children:e.address})}),Object(a.jsx)(W.a.Column,{width:4,children:Object(a.jsx)(I.a,{color:"teal",size:"tiny",content:"Show Map"})})]})})]})}}]),n}(s.a.Component),Ge=n(781),He=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(N.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"},children:Object(a.jsx)(Z.a,{children:"Chat about this event"})}),Object(a.jsx)(N.a,{attached:!0,children:Object(a.jsxs)(Ge.a.Group,{children:[Object(a.jsxs)(Ge.a,{children:[Object(a.jsx)(Ge.a.Avatar,{src:"/assets/user.png"}),Object(a.jsxs)(Ge.a.Content,{children:[Object(a.jsx)(Ge.a.Author,{as:"a",children:"Matt"}),Object(a.jsx)(Ge.a.Metadata,{children:Object(a.jsx)("div",{children:"Today at 5:42PM"})}),Object(a.jsx)(Ge.a.Text,{children:"How artistic!"}),Object(a.jsx)(Ge.a.Actions,{children:Object(a.jsx)(Ge.a.Action,{children:"Reply"})})]})]}),Object(a.jsxs)(Ge.a,{children:[Object(a.jsx)(Ge.a.Avatar,{src:"/assets/user.png"}),Object(a.jsxs)(Ge.a.Content,{children:[Object(a.jsx)(Ge.a.Author,{as:"a",children:"Elliot Fu"}),Object(a.jsx)(Ge.a.Metadata,{children:Object(a.jsx)("div",{children:"Yesterday at 12:30AM"})}),Object(a.jsx)(Ge.a.Text,{children:Object(a.jsx)("p",{children:"This has been very useful for my research. Thanks as well!"})}),Object(a.jsx)(Ge.a.Actions,{children:Object(a.jsx)(Ge.a.Action,{children:"Reply"})})]}),Object(a.jsx)(Ge.a.Group,{children:Object(a.jsxs)(Ge.a,{children:[Object(a.jsx)(Ge.a.Avatar,{src:"/assets/user.png"}),Object(a.jsxs)(Ge.a.Content,{children:[Object(a.jsx)(Ge.a.Author,{as:"a",children:"Jenny Hess"}),Object(a.jsx)(Ge.a.Metadata,{children:Object(a.jsx)("div",{children:"Just now"})}),Object(a.jsx)(Ge.a.Text,{children:"Elliot you are always so right :)"}),Object(a.jsx)(Ge.a.Actions,{children:Object(a.jsx)(Ge.a.Action,{children:"Reply"})})]})]})})]}),Object(a.jsxs)(Ge.a,{children:[Object(a.jsx)(Ge.a.Avatar,{src:"/assets/user.png"}),Object(a.jsxs)(Ge.a.Content,{children:[Object(a.jsx)(Ge.a.Author,{as:"a",children:"Joe Henderson"}),Object(a.jsx)(Ge.a.Metadata,{children:Object(a.jsx)("div",{children:"5 days ago"})}),Object(a.jsx)(Ge.a.Text,{children:"Dude, this is awesome. Thanks so much"}),Object(a.jsx)(Ge.a.Actions,{children:Object(a.jsx)(Ge.a.Action,{children:"Reply"})})]})]}),Object(a.jsxs)(X.a,{reply:!0,children:[Object(a.jsx)(X.a.TextArea,{}),Object(a.jsx)(I.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0})]})]})})]})}}]),n}(s.a.Component),Ve=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.event,t=J(e.attendees);return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)(N.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal",children:[t&&t.length," ",1==t.length?"person":"people"," going"]}),t.map((function(e){return Object(a.jsx)(N.a,{attached:!0,children:Object(a.jsx)(_.a.Group,{divided:!0,children:Object(a.jsxs)(_.a,{style:{position:"relative"},children:[1==e.host&&Object(a.jsx)(z.a,{style:{position:"absolute"},color:"orange",ribbon:"right",children:"Host"}),Object(a.jsx)(_.a.Image,{size:"tiny",src:e.photoURL}),Object(a.jsx)(_.a.Content,{verticalAlign:"middle",children:Object(a.jsx)(_.a.Header,{as:"h3",children:Object(a.jsx)(y.b,{to:"/profile/".concat(e.id),children:e.displayName})})})]})})})}))]})}}]),n}(s.a.Component),Be=Object(m.f)((function(e){var t=e.history;return Object(a.jsxs)(N.a,{placeholder:!0,children:[Object(a.jsxs)(Z.a,{icon:!0,children:[Object(a.jsx)(G.a,{name:"search"}),"Oops - we've looked everywhere but couldn't find this."]}),Object(a.jsx)(N.a.Inline,{children:Object(a.jsx)(I.a,{onClick:function(){return t.push("/dashboard")},primary:!0,children:"Return to Events page"})})]})})),Je=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,this.props.firestore.setListener("events/".concat(t));case 3:e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,this.props.firestore.unsetListener("events/".concat(t));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.event;return 0===Object.keys(e).length?Object(a.jsx)(Be,{}):Object(a.jsxs)(W.a,{children:[Object(a.jsxs)(W.a.Column,{width:10,children:[Object(a.jsx)(ze,{event:e}),Object(a.jsx)(_e,{event:e}),Object(a.jsx)(He,{})]}),Object(a.jsx)(W.a.Column,{width:6,children:Object(a.jsx)(Ve,{event:e})})]})}}]),n}(s.a.Component),Ye=Object(l.compose)(j.withFirestore,Object(C.connect)((function(e,t){var n=t.match.params.id,r={};return e.firestore.ordered.events&&e.firestore.ordered.events.length>0&&(r=e.firestore.ordered.events.filter((function(e){return e.id===n}))[0]||{}),{event:r}})))(Je),qe=function(e){var t=e.profile;return console.log(t),Object(a.jsx)(W.a.Column,{width:12,children:Object(a.jsx)(N.a,{children:Object(a.jsxs)(W.a,{columns:2,children:[Object(a.jsxs)(W.a.Column,{width:10,children:[Object(a.jsx)(Z.a,{icon:"smile",content:"About Display Name"}),Object(a.jsxs)("p",{children:["I am a: ",Object(a.jsx)("strong",{children:t.occupation})]}),Object(a.jsxs)("p",{children:["Originally from ",Object(a.jsx)("strong",{children:t.city})]}),Object(a.jsx)("p",{children:t.about})]}),Object(a.jsxs)(W.a.Column,{width:6,children:[Object(a.jsx)(Z.a,{icon:"heart outline",content:"Interests"}),Object(a.jsx)(H.a,{children:t.interests&&t.interests.map((function(e,t){return Object(a.jsxs)(_.a,{children:[Object(a.jsx)(G.a,{name:"heart"}),Object(a.jsx)(_.a.Content,{children:e})]},t)}))})]})]})})})},We=function(){return Object(a.jsx)(W.a.Column,{width:12,children:Object(a.jsxs)(N.a,{attached:!0,children:[Object(a.jsx)(Z.a,{icon:"calendar",content:"Events"}),Object(a.jsxs)(v.a,{secondary:!0,pointing:!0,children:[Object(a.jsx)(v.a.Item,{name:"All Events",active:!0}),Object(a.jsx)(v.a.Item,{name:"Past Events"}),Object(a.jsx)(v.a.Item,{name:"Future Events"}),Object(a.jsx)(v.a.Item,{name:"Events Hosted"})]}),Object(a.jsxs)(De.a.Group,{itemsPerRow:5,children:[Object(a.jsxs)(De.a,{children:[Object(a.jsx)(w.a,{src:"/assets/categoryImages/drinks.jpg"}),Object(a.jsxs)(De.a.Content,{children:[Object(a.jsx)(De.a.Header,{textAlign:"center",children:"Event Title"}),Object(a.jsx)(De.a.Meta,{textAlign:"center",children:"28th March 2018 at 10:00 PM"})]})]}),Object(a.jsxs)(De.a,{children:[Object(a.jsx)(w.a,{src:"/assets/categoryImages/drinks.jpg"}),Object(a.jsxs)(De.a.Content,{children:[Object(a.jsx)(De.a.Header,{textAlign:"center",children:"Event Title"}),Object(a.jsx)(De.a.Meta,{textAlign:"center",children:"28th March 2018 at 10:00 PM"})]})]})]})]})})},Ke=function(e){var t=e.profile;return Object(a.jsx)(W.a.Column,{width:16,children:Object(a.jsx)(N.a,{children:Object(a.jsx)(_.a.Group,{children:Object(a.jsxs)(_.a,{children:[Object(a.jsx)(_.a.Image,{avatar:!0,size:"small",src:t.photoURL}),Object(a.jsxs)(_.a.Content,{verticalAlign:"bottom",children:[Object(a.jsx)(Z.a,{as:"h1",children:t.displayName}),Object(a.jsx)("br",{}),Object(a.jsx)(Z.a,{as:"h3",children:t.occupation}),Object(a.jsx)("br",{}),Object(a.jsxs)(Z.a,{as:"h3",children:["Lives in ",t.city]})]})]})})})})},Qe=function(e){var t=e.photos;return Object(a.jsx)(W.a.Column,{width:12,children:Object(a.jsxs)(N.a,{attached:!0,children:[Object(a.jsx)(Z.a,{icon:"image",content:"Photos"}),Object(a.jsx)(w.a.Group,{size:"small",children:t.length>0&&t.map((function(e){return Object(a.jsx)(w.a,{src:e.url},e.id)}))})]})})},Xe=function(){return Object(a.jsx)(W.a.Column,{width:4,children:Object(a.jsx)(N.a,{children:Object(a.jsx)(I.a,{color:"teal",fluid:!0,basic:!0,content:"Edit Profile"})})})},Ze=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.profile,n=(e.auth,e.photos);return Object(a.jsxs)(W.a,{children:[Object(a.jsx)(Ke,{profile:t}),Object(a.jsx)(qe,{profile:t}),Object(a.jsx)(Xe,{}),n&&n.length>0&&Object(a.jsx)(Qe,{photos:n}),Object(a.jsx)(We,{})]})}}]),n}(c.Component),$e=Object(l.compose)(Object(C.connect)((function(e,t){var n={},r=null;return t.match.params.id===e.firebase.auth.uid?n=e.firebase.profile:(n=!Object(j.isEmpty)(e.firestore.ordered.profile)&&e.firestore.ordered.profile[0],r=t.match.params.id),{auth:e.firebase.auth,userUid:r,profile:n,photos:e.firestore.ordered.photos}})),Object(j.firestoreConnect)((function(e,t){return function(e){var t=e.auth,n=e.userUid;return null!==n?[{collection:"users",doc:n,storeAs:"profile"},{collection:"users",doc:n,subcollections:[{collection:"photos"}],storeAs:"photos"}]:[{collection:"users",doc:t.uid,subcollections:[{collection:"photos"}],storeAs:"photos"}]}(e)})))(Ze),et=function(){return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)(v.a,{vertical:!0,children:[Object(a.jsx)(Z.a,{icon:"user",attached:!0,inverted:!0,color:"grey",content:"Profile"}),Object(a.jsx)(v.a.Item,{as:y.c,to:"/settings/basic",children:"Basics"}),Object(a.jsx)(v.a.Item,{as:y.c,to:"/settings/about",children:"About Me"}),Object(a.jsx)(v.a.Item,{as:y.c,to:"/settings/photo",children:"My Photos"})]}),Object(a.jsx)(W.a.Row,{}),Object(a.jsxs)(v.a,{vertical:!0,children:[Object(a.jsx)(Z.a,{icon:"settings",attached:!0,inverted:!0,color:"grey",content:"Account"}),Object(a.jsx)(v.a.Item,{as:y.c,to:"/settings/account",children:"My Account"})]})]})},tt=Object(je.combineValidators)({newPassword1:Object(je.isRequired)({message:"please enter a new password"}),newPassword2:Object(je.composeValidators)(Object(je.isRequired)({message:"please enter your new password"}),Object(je.matchesField)("newPassword1")({message:"Passwords do not match"}))()}),nt=Object(Q.a)({form:"account",validate:tt})((function(e){var t=e.error,n=e.handleSubmit,r=e.updatePassword,c=e.providerId,s=e.pristine,o=e.submitting;return Object(a.jsxs)(N.a,{children:[Object(a.jsx)(Z.a,{dividing:!0,size:"large",content:"Account"}),"password"==c&&Object(a.jsxs)("div",{children:[Object(a.jsx)(Z.a,{color:"teal",sub:!0,content:"Change password"}),Object(a.jsx)("p",{children:"Use this form to update your account settings"}),Object(a.jsxs)(X.a,{onSubmit:n(r),children:[Object(a.jsx)(K.a,{width:8,name:"newPassword1",type:"password",pointing:"left",inline:!0,component:ne,basic:!0,placeholder:"New Password"}),Object(a.jsx)(K.a,{width:8,name:"newPassword2",type:"password",inline:!0,basic:!0,pointing:"left",component:ne,placeholder:"Confirm Password"}),t&&Object(a.jsx)(z.a,{basic:!0,color:"red",children:t}),Object(a.jsx)(fe.a,{}),Object(a.jsx)(I.a,{size:"large",positive:!0,content:"Update Password",disabled:s||o})]})]}),"facebook.com"==c&&Object(a.jsxs)("div",{children:[Object(a.jsx)(Z.a,{color:"teal",sub:!0,content:"Facebook Account"}),Object(a.jsx)("p",{children:"Please visit Facebook to update your account settings"}),Object(a.jsxs)(I.a,{type:"button",color:"facebook",children:[Object(a.jsx)(G.a,{name:"facebook"}),"Go to Facebook"]})]}),"google.com"==c&&Object(a.jsxs)("div",{children:[Object(a.jsx)(Z.a,{color:"teal",sub:!0,content:"Google Account"}),Object(a.jsx)("p",{children:"Please visit Google to update your account settings"}),Object(a.jsxs)(I.a,{type:"button",color:"google plus",children:[Object(a.jsx)(G.a,{name:"google plus"}),"Go to Google"]})]})]})})),rt=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(W.a,{children:[Object(a.jsxs)(W.a.Column,{width:12,children:[Object(a.jsx)(m.a,{path:"/settings/basic",render:function(){return Object(a.jsx)(Me,{initialValues:e.props.profile})}}),Object(a.jsx)(m.a,{path:"/settings/about",render:function(){return Object(a.jsx)(Fe,{updateProfile:e.props.updateProfile})}}),Object(a.jsx)(m.a,{path:"/settings/photo",component:Te}),Object(a.jsx)(m.a,{path:"/settings/account",render:function(){return Object(a.jsx)(nt,{updatePassword:e.props.updatePassword,providerId:e.props.providerId})}})]}),Object(a.jsx)(W.a.Column,{width:4,children:Object(a.jsx)(et,{})})]})}}]),n}(s.a.Component),at=Object(C.connect)((function(e){return{providerId:e.firebase.auth.providerData[0].providerId,profile:e.firebase.profile}}),{updatePassword:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,r,a){var c,s,o;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.getFirebase,a.getFirestore,s=c(),t.prev=2,o=s.auth().currentUser,t.next=6,o.updatePassword(e.newPassword1);case 6:n(Object(E.a)("account")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,r){return t.apply(this,arguments)}}()},updateProfile:Ce})(rt),ct=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return Object(a.jsx)(N.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(a.jsxs)(g.a,{text:!0,children:[Object(a.jsxs)(Z.a,{as:"h1",inverted:!0,children:[Object(a.jsx)(w.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Re-vents"]}),Object(a.jsxs)(I.a,{size:"huge",inverted:!0,as:y.b,to:"/dashboard",children:["Get started",Object(a.jsx)(G.a,{name:"right arrow",inverted:!0})]})]})})}}]),n}(s.a.Component),st=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)("button",{onClick:function(){return e.props.openModal("TestModal")},children:"click here"})}}]),n}(s.a.Component),ot=Object(C.connect)(null,{openModal:R})(st),it=n(784),lt=Object(C.connect)(null,{closeModal:S})((function(e){return Object(a.jsxs)(it.a,{closeIcon:"close",open:!0,onClose:function(){return e.closeModal()},children:[Object(a.jsx)(it.a.Header,{children:"Test Modal"}),Object(a.jsx)(it.a.Content,{children:Object(a.jsx)(it.a.Description,{children:Object(a.jsx)("p",{children:"Test Modal... nothing to see here"})})})]})})),ut=Object(C.connect)(null,{socialLogin:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,r,a){var c,s,o,i,l;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.getFirebase,s=a.getFirestore,o=c(),i=s(),t.prev=3,t.next=6,o.login({provider:e,type:"popup"});case 6:if(!(l=t.sent).additionalUserInfo.isNewUser){t.next=10;break}return t.next=10,i.collection("users").doc(l.user.uid).set({displayName:l.profile.displayName,photoURL:l.profile.avatarUrl,createdAt:i.FieldValue.serverTimestamp()});case 10:n({type:"CLOSE_MODAL"}),t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(3),new F.a({_error:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()}})((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(I.a,{type:"button",style:{marginBottom:"10px"},fluid:!0,color:"facebook",onClick:function(){return e.socialLogin("facebook")},children:[Object(a.jsx)(G.a,{name:"facebook"})," Login with Facebook"]}),Object(a.jsxs)(I.a,{type:"button",fluid:!0,color:"google plus",onClick:function(){return e.socialLogin("google")},children:[Object(a.jsx)(G.a,{name:"google plus"}),"Login with Google"]})]})})),jt=Object(l.compose)(Object(C.connect)(null,{logIn:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,r,a){var c,s;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.getFirebase,a.getFirestore,s=c(),t.prev=2,t.next=5,s.auth().signInWithEmailAndPassword(e.email,e.password);case 5:n({type:"CLOSE_MODAL"}),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(2),new F.a({_error:"log in failed"});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()}}),Object(Q.a)({form:"LoginForm"}))((function(e){return Object(a.jsxs)(X.a,{error:!0,size:"large",onSubmit:e.handleSubmit(e.logIn),children:[Object(a.jsxs)(N.a,{children:[Object(a.jsx)(K.a,{name:"email",component:ne,type:"text",placeholder:"Email Address"}),Object(a.jsx)(K.a,{name:"password",component:ne,type:"password",placeholder:"password"}),e.error&&Object(a.jsx)(z.a,{basic:!0,color:"red",children:e.error}),Object(a.jsx)(I.a,{fluid:!0,size:"large",color:"teal",children:"Login"})]}),Object(a.jsx)(fe.a,{horizontal:!0,children:"Or"}),Object(a.jsx)(ut,{})]})})),dt={closeModal:S},bt=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(it.a,{size:"mini",open:!0,onClose:this.props.closeModal,children:[Object(a.jsx)(it.a.Header,{children:"Login to Re-vents"}),Object(a.jsx)(it.a.Content,{children:Object(a.jsx)(it.a.Description,{children:Object(a.jsx)(jt,{})})})]})}}]),n}(c.Component),pt=Object(C.connect)(null,dt)(bt),ht=Object(l.compose)(Object(C.connect)(null,{signIn:function(e){return function(){var t=Object(P.a)(M.a.mark((function t(n,a,c){var s,o,i,l,u,j;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.getFirebase,o=c.getFirestore,i=s(),l=o(),t.prev=3,t.next=6,i.auth().createUserWithEmailAndPassword(e.email,e.password);case 6:return u=t.sent,t.next=9,u.user.updateProfile({displayName:e.displayName});case 9:return j={displayName:e.displayName,createdAt:l.FieldValue.serverTimestamp()},t.next=12,l.collection("users").doc(u.user.uid).set(Object(r.a)({},j));case 12:n({type:"CLOSE_MODAL"}),t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(3),new F.a({_error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e,n,r){return t.apply(this,arguments)}}()}}),Object(Q.a)({form:"registerForm"}))((function(e){return Object(a.jsx)("div",{children:Object(a.jsxs)(X.a,{size:"large",onSubmit:e.handleSubmit(e.signIn),children:[Object(a.jsxs)(N.a,{children:[Object(a.jsx)(K.a,{name:"displayName",type:"text",component:ae,placeholder:"Known As"}),Object(a.jsx)(K.a,{name:"email",type:"text",component:ae,placeholder:"Email"}),Object(a.jsx)(K.a,{name:"password",type:"password",component:ae,placeholder:"Password"}),e.error&&Object(a.jsx)(z.a,{basic:!0,color:"red",children:e.error}),Object(a.jsx)(I.a,{fluid:!0,size:"large",color:"teal",children:"Register"})]}),Object(a.jsx)(fe.a,{horizontal:!0,children:"Or"}),Object(a.jsx)(ut,{})]})})})),Ot={closeModal:S},xt=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(it.a,{size:"mini",open:!0,onClose:this.props.closeModal,children:[Object(a.jsx)(it.a.Header,{children:"Sign Up to Re-vents!"}),Object(a.jsx)(it.a.Content,{children:Object(a.jsx)(it.a.Description,{children:Object(a.jsx)(ht,{})})})]})}}]),n}(c.Component),ft=Object(C.connect)(null,Ot)(xt),mt=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e,t={TestModal:lt,LoginModal:pt,RegisterModal:ft};if(this.props.currentModal){var n=t[this.props.currentModal.modalType];e=Object(a.jsx)(n,Object(r.a)({},this.props.currentModal.modalProps))}return Object(a.jsx)("span",{children:e})}}]),n}(s.a.Component),vt=Object(C.connect)((function(e){return{currentModal:e.modals}}))(mt),gt=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(vt,{}),Object(a.jsx)(m.a,{exact:!0,path:"/",component:ct}),Object(a.jsx)(m.a,{path:"/(.+)",render:function(){return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(T,{}),Object(a.jsx)(g.a,{className:"main",children:Object(a.jsxs)(m.c,{children:[Object(a.jsx)(m.a,{path:"/Dashboard",component:xe}),Object(a.jsx)(m.a,{path:"/test",component:ot}),Object(a.jsx)(m.a,{path:"/settings",component:at}),Object(a.jsx)(m.a,{path:["/createEvent","/manageEvent/:id"],component:he}),Object(a.jsx)(m.a,{path:"/events/:id",component:Ye}),Object(a.jsx)(m.a,{path:"/profile/:id",component:$e}),Object(a.jsx)(m.a,{component:Be})]},e.props.location.key)})]})}})]})}}]),n}(s.a.Component),yt=Object(m.f)(gt),wt=(n(726),n(423)),kt=n(264),Ct=[],At=n(162),Mt=Object(l.combineReducers)({firestore:At.firestoreReducer,firebase:j.firebaseReducer,events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EVENT":return[].concat(Object(kt.a)(e),[t.payload]);case"DELETE_EVENT":return Object(kt.a)(e.filter((function(e){return e.id!=t.payload})));case"UPDATE_EVENT":return Object(kt.a)(e.map((function(e){return e.id==t.payload.id?t.payload:e})));default:return e}},form:wt.a,modals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_MODAL":var n=t.payload;return{modalType:n};case"CLOSE_MODAL":return null;default:return e}},toastr:ee.reducer,async:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ve:return Object(r.a)(Object(r.a)({},e),{},{loading:!0,error:null});case ge:return Object(r.a)(Object(r.a)({},e),{},{loading:!1});case ye:return Object(r.a)(Object(r.a)({},e),{},{loading:!1,error:a});case we:return Object(r.a)(Object(r.a)({},e),{},{initialized:!0});default:return e}}}),Pt=n(436),Ft=(n(758),Object(l.createStore)(Mt,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(Pt.a.withExtraArgument({getFirestore:At.getFirestore,getFirebase:j.getFirebase})),Object(At.reduxFirestore)(b)))),Et={firebase:p.a,config:{userProfile:"users",useFirestoreForProfile:!0,updateProfileOnLogin:!1},fbConfig:b,dispatch:Ft.dispatch,createFirestoreInstance:At.createFirestoreInstance};function Lt(e){var t=e.children,n=Object(C.useSelector)((function(e){return e.firebase.auth}));return Object(j.isLoaded)(n)?t:Object(a.jsx)("div",{children:"Loading Screen..."})}i.a.render(Object(a.jsx)(C.Provider,{store:Ft,children:Object(a.jsx)(j.ReactReduxFirebaseProvider,Object(r.a)(Object(r.a)({},Et),{},{children:Object(a.jsx)(y.a,{children:Object(a.jsxs)(Lt,{children:[Object(a.jsx)(te.a,{position:"bottom-right",transitionIn:"fadeIn",transitionOut:"fadeOut"}),Object(a.jsx)(yt,{})]})})}))}),document.getElementById("root"))}},[[759,1,2]]]);
//# sourceMappingURL=main.1c2e0e9f.chunk.js.map